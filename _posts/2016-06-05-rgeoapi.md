---
ID: 972
post_title: >
  rgeoapi — Un package R pour accéder
  à la GéoAPI
author: colin_fay
post_date: 2016-06-05 19:11:29
post_excerpt: ""
layout: single
permalink: /rgeoapi/
published: true
---
<div id="destine-a-interroger-la-geoapi-detalab.-lobjectif-simplifier-lacces-a-la-reference-geographique-des-communes-francaises." class="section level2">
## rgeoapi est destiné à interroger la GéoAPI d’Etalab avec R. L’objectif ? Simplifier l’accès aux références géographiques des communes françaises.
<!--more-->
<div id="geoapi" class="section level3">
### GeoAPI
__Développé par Etalab__, en partenariat avec La Poste, l’INSEE et OpenStreetMap, <a href="https://api.beta.gouv.fr/api/geoapi.html">GéoAPI</a> vous permet de lancer des __requêtes sur la base de données géographiques française__ (métropole et DROM).

L’interface renvoie des coordonnées géographiques WGS-84, au format JSON et GeoJSON. Le package <a href="https://github.com/ColinFay/rgeoapi">rgeoapi</a> a été développé afin de vous permettre d’intégrer les informations de cette API facilement dans vos projets R.

</div>
<div id="installer-rgeoapi" class="section level3">
### Installer rgeoapi
Pour l’heure, rgeoapi est disponible sur Github. Vous pouvez l’installer dans votre environnement R via la commande suivante :
```{r}devtools::install_github("ColinFay/rgeoapi")```
</div>
<div id="fonctionnement-de-rgeoapi" class="section level3">
### Fonctionnement de rgeoapi
Cette première version du package s’articule autour de trois fonctions. Toutes renvoient un dataframe contenant les variables suivantes :

- <code>name</code> : le ou les nom(s)
- <code>codeInsee</code>: le ou les codes INSEE
- <code>codesPostaux</code> : le ou les codes postaux
- <code>surface</code> : la surface
- <code>lat </code>et <code>long</code>: les coordonnées GPS
```{r}library(rgeoapi)```
<pre><code>## Loading required package: httr```
<pre><code>## Loading required package: rjson```
<div id="getbypc" class="section level4">
#### getByPC
Cette fonction prend un code postal en entrée, et renvoie la ville qui correspond à ce code. Attention, lorsque la ville répond à plusieurs codes postaux (comme Rennes), tous les codes sont affichés.
```{r}getByPC(35000)```
<pre><code>##     name codeInsee codesPostaux surface      lat      long
## 1 Rennes     35238        35200    5035 48.11023 -1.678872
## 2 Rennes     35238        35700    5035 48.11023 -1.678872
## 3 Rennes     35238        35000    5035 48.11023 -1.678872```
</div>
<div id="getbyname" class="section level4">
#### getByName
Comme son nom l’indique, cette fonction prend en entrée le nom d’une ville et renvoie l’ensemble des villes qui correspondent parfaitement ou partiellement.
```{r}getByName("Rennes")```
<pre><code>##                    name codeInsee codesPostaux surface      lat       long
## 1                Rennes     35238        35200    5035 48.11023 -1.6788723
## 2                Rennes     35238        35700    5035 48.11023 -1.6788723
## 3                Rennes     35238        35000    5035 48.11023 -1.6788723
## 4     Rennes-le-Château     11309        11190    1497 42.91498  2.2774065
## 5      Rennes-les-Bains     11310        11190    1975 42.92166  2.3408405
## 6       Rennes-sur-Loue     25488        25440     547 47.01497  5.8551652
## 7 Rennes-en-Grenouilles     53189        53110     801 48.49128 -0.5083472```
</div>
<div id="getbyic" class="section level4">
#### getByIC
<code>getByIC</code> prend un code INSEE en entrée, et renvoie le data.frame de la commune correspondante.
```{r}getByIC(35238)```
<pre><code>##     name codeInsee codePostal surface      lat      long
## 1 Rennes     35238      35200    5035 48.11023 -1.678872
## 2 Rennes     35238      35700    5035 48.11023 -1.678872
## 3 Rennes     35238      35000    5035 48.11023 -1.678872```
</div>
</div>
<div id="plus-dinfos-et-contact" class="section level3">
### Plus d’infos et contact
Plus d’infos sur ce package, ainsi que le code source, disponible sur la <a href="https://github.com/ColinFay/rgeoapi">page Github</a> — vos feedbacks sont les bienvenus !

Des questions sur ce package ? Des retours à me faire ? N’hésitez pas à me <a href="mailto:contact@colinfay.me">contacter</a> !

</div>
</div>
&nbsp;
